<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Last Letter - xyz.kcmo.xyz</title>
      <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.1.5/dist/signature_pad.umd.min.js"></script>
      <link rel="icon" href="./favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Mono:wght@100..900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
 <!-- Include both fonts -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="./style.css">


</head>
<body>
  <div class="page" id="top">    <div class="imconn"><a href="#top">
            <img src="./bt.png" alt="xyz.kcmo.xyz">
        </a>
      </div><h1 id="mechanical-press">The&nbsp;Last&nbsp;Letter</h1>
   
      
        
    </div>  <p>(A&nbsp;Kansas&nbsp;City&nbsp;Manifesto)</p><div class="page" id="topnav">
<a href="#letter">Pt.I</a>
<a href="#bgde">Pt.II</a>
<a href="#signs">Signatures</a>
<a href="#contact">Contact</a></div>
    <div class="page" id="letter">

        <section id="part1">
            <h2>Part I - The Letter</h2>
            <p>
                We, the people of Kansas City, Missouri, resolve that not one day longer will we beg for justice or plead for mercy from our oppressors. This being our Last Letter and Demand for Liberation, written by the people of this place to the governments and councils of the city, state, and federal "authorities" — our so-called leaders.
            </p>
            <p>
                This Last Letter to you who would stand forever on our backs is our collective voice, rising in unison to say NO MORE and NEVER AGAIN. Power to the people of Kansas City! Power to the people of Earth! We will rise up now, in solidarity with all who fight against their colonizers, with love for all those who resist their oppressors. These are our demands and the will of the people. This will be our Last Letter. Read it carefully.
            </p>
            <h3>We Demand:</h3>
            <h4>Abolition</h4>
            <p>
                The immediate abolition of all police and so-called law enforcement units, prisons, detainment or detention-based facilities or jails, and all other such murder and enslavement for profit schemes and terrorist arms of the state. We will no longer accept the existence of these state-sponsored mechanisms of violence.
            </p>
            <h4>Reallocation</h4>
            <p>
                The reallocation of such resources as, but not only, the budgets of the abolished entities, to fund in perpetuity programs for community development, mental health services, and crisis response teams, to consist of facilities, training, and any other needs to equip us to care for our fellows.
            </p>
            <h4>Community Defense</h4>
            <p>
                The equipment, arms, funds, training facilities, and other reparative resources to enable our neighborhoods each and all to defend against incursions by any supremacist, capitalist, or other exploitative organization, sympathizer, collaborator, or bootlicking type scoundrel which would do us violence, and to secure and retain our liberty and safety. The authority to defend our communities rests inherently with the people and requires no validation from or interference by the state.
            </p>
            <h4>Prosecution</h4>
            <p>
                The prosecution of all enforcers, adjudicators, or enablers of state violence who would keep or who actively strive to keep such corrupt and violent schemes and institutions in place for their own profit, and would stand in the way of our demand the 1st of this letter, namely the Abolition Demand. Justice demands accountability for those who stand in the way of abolition and liberation.
            </p>
            <h4>Universal Provision</h4>
            <p>
                No more will any who wishes to be housed, fed, clothed, treated for medical needs, or supported by the community in time of crisis go without these things, as they are the human rights of all, and the moral obligation of every community to provide one to another, all to each, and each to all. The hoarder and gatekeeper of such resources will vacate such positions or be removed. Their myth of scarcity will be supplanted by the truth of plenty—there is enough for all.
            </p>
        </section>
        <section id="partA">
           
              <h3>  ** To those in power: <em>your time is up.</em> </h3> <p><strong>The people of Kansas City will no longer tolerate systems that harm us. Embody these changes set forth, to truly serve the public for once, or <em>peacefully step aside now.</em> You will sleep a lot better at night. **</strong>
            </p>
        </section>
        <section id="sig">
            <h3>Signed, we the people - </h3>
            <p>the citizens whom you not only consistently fail to serve, but actively, <strong>willingly exploit</strong> and betray - hoping to build a more caring and capable society together.</p>
            <p>To include, in particular, all current and future members of the informal and all-volunteer <strong>Last Letter Brigade for Abolition in Kansas City Missouri</strong> (LLBA-KCMO), who by their public affiliation with that group do affirm their dedication to the pursuit and support of these goals.</p>
        </section>
        </div>
        
 <br> <hr> <br>
       
        <div class="page" id="bgde">
        
        
        <section id="part2">
            <h2>Part II - The Brigade</h2>
            <p>
                The Last Letter Brigade for Abolition will be a volunteer brigade, charged with ensuring the demands of the people are met and that communities can build networks and resources to provide for and defend themselves, without harrassment or obstruction. To that end, the Brigade will consist of:
            </p>
            <h3>An Armed Defense Wing</h3>
            <p>
                (LLBA-KCMO:ADW); Ideally comprised of several 7-13 person cohorts, or larger groups when necessary, armed, trained, and available to defend the people and neutralize the violence inherent in the current system with their own capabilities for violence, as it is the only power the pigs understand.
            </p>
            <h3>A Non-Violent Wing</h3>
            <p>
                (LLBA-KCMO:NVW); This wing will focus on supporting existing abolitionist and mutual aid groups, attending protests and actions, and building community resilience without armed engagement, as well as drafting future documents and charters as needed for the direction and use of the Brigade. No more letters though, if you please. ;) This Wing of the Brigade will consist of all who wish to participate.
            </p></section></div>
            
 <br> <hr> <br>
            
            <div class="page" id="act">
            <h2>An Invitation to Act</h2>
            <p>
                Join with the Last Letter Brigade for Abolition in Kansas City, Missouri in demanding real changes from a city and state where lip service and token gestures have often been just a prelude to new and crueler forms of injustice. We must no longer accept the status quo; your neighbors need your help to shape our city into a  better home for everyone.
            </p>
            
    
            </div>
            
 <br> <hr> <br>
            
            <div class="page" id="signs">
   
    
            <section id="sign"><h3>Add your Signature or Mark</h3>
           <!-- Signature area -->
    <canvas id="signatureCanvas" width="468" height="128"></canvas><br>
     <button id="clearBtn">Reset (Erase)</button>
    <br>
<br>
    <!-- Typed name -->
    <label>
      <small>Name or Other Identifier:</small><br>
      <input type="text" id="typedName" placeholder="Type your name">
    </label>
    <br><br>

    <!-- Mandatory checkbox -->
    <label>
      <input id="consent" type="checkbox" required> <small>I stand with my community. I demand change. I sign my name in solidarity.</small>
    </label>
    <br><br>

   
    <button id="submitBtn">Submit</button>

        </section>

<h2>Community Signatures</h2>

<h3 id="submissionHeading">
  Total Signatures: <span id="submissionCount"></span>
</h3>


<div id="gallery">
</div>
</div> 

<br><hr><br>

<div class="page" id="contact">
<h2>Contact:</h2> 

<form id="contact-form">
    <label>
     <small> Name:</small><br>
      <input type="text" name="name" required>
    </label><br>
    <label>
    <small>  Email:</small><br>
      <input type="email" name="email" required>
    </label>
    <br>
    <label>
      <small>Message:</small><br>
      <textarea name="message" required></textarea>
    </label><br>
    <button type="submit">Send</button>
  </form>

<small>
To contact the author of this page please use this contact form, or email: </small> <h3><a href="mailto:jojo@kcmo.xyz"><span class="material-icons">email</span> jojo@kcmo.xyz</a></h3>
<small>I don't claim to own this content, and though I did write it, I probably stole half of it. Can't be sure. Also, I cannot and do not attempt to speak for every individual person, and understand that opinions differ. If you don't agree with me, you may express that by not adding your signature to the document, simply navigating away from this page, or with a neighborly missive if you feel like I need to know something; I may even be persuaded to re-write a section or sections, if you can tell me why and it makes sense. However, if you decide to use abusive language to express yourself you will likely be disregarded or worse. Civility, tact and restraint are all capable of being tools of oppression when stretched beyond a certain limit. Please let's don't test that theory or my level of tolerance. Thanks :)</small>

</div>

<br><hr><br>
    <div class="page" id="bottom">
        <a href="#top">
            <img src="./bt.png" alt="xyz.kcmo.xyz">
        </a>
        <a href="#letter">Pt.I</a>
        <a href="#bgde">Pt.II</a>
        <a href="#signs">Signatures</a>
        <a href="#contact">Contact</a>
    </div>
<script>
  const canvas = document.getElementById("signatureCanvas");
  const signaturePad = new SignaturePad(canvas);
  const nameInput = document.getElementById("typedName");
  const consentBox = document.getElementById("consent");
  const clearBtn = document.getElementById("clearBtn");
  const submitBtn = document.getElementById("submitBtn");


  clearBtn.addEventListener("click", () => {
    signaturePad.clear();
  });
  window.addEventListener("DOMContentLoaded", async () => {
    // If localStorage says "hasSubmitted", disable the form right away
    const hasSubmitted = localStorage.getItem("hasSubmitted") === "true";
    if (hasSubmitted) {
      disableForm();
    }

    try {
      // Fetch existing submissions to populate the gallery
      const resp = await fetch("https://luge-worker.jojo-829.workers.dev/api/submissions");
      if (resp.ok) {
        const data = await resp.json();
        updateGallery(data.count, data.submissions);
      } else {
        console.error("Failed to load initial gallery. Status:", resp.status);
      }
    } catch (err) {
      console.error("Error loading initial gallery:", err);
    }
  });

  // 3) Submit button logic
  submitBtn.addEventListener("click", async () => {
    // Validate
    if (!consentBox.checked) {
      alert("You must agree first!");
      return;
    }
    if (signaturePad.isEmpty()) {
      alert("Please provide a signature first.");
    return;
  }


  // Grab typedName from the element, not just a string
  const typedName = nameInput.value || "Anonymous";
  const signatureDataUrl = signaturePad.toDataURL("image/png");

  try {
    // POST to Worker
    const response = await fetch("https://luge-worker.jojo-829.workers.dev/api/submit", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ typedName, signatureDataUrl }),
    });

    if (!response.ok) {
      throw new Error("Submission failed");
    }

    // Parse response
    const { count, submissions } = await response.json();
    updateGallery(count, submissions);

    // Clear the form after successful submission
    nameInput.value = "";
    consentBox.checked = false;
    signaturePad.clear();

    // Mark localStorage so the user cannot submit again from this browser
    localStorage.setItem("hasSubmitted", "true");
    disableForm();
  } catch (error) {
    alert(`Error: ${error.message}`);
    console.error(error);
  }
  setTimeout(() => {
    const message = document.createElement("p");
    message.textContent = "Thank you for standing with us!";
    message.classList.add("fade-in");
    document.getElementById("sign").appendChild(message);
  }, 500);
});
  // 4) The function to update the gallery
  function updateGallery(count, submissions) {
    // Update the total count in the heading
    document.getElementById("submissionCount").textContent = count;

    // Clear & rebuild the “cards” in the flex container
    const gallery = document.getElementById("gallery");
    gallery.innerHTML = ""; // We'll only put the “cards” here

    // For each submission, create a "card"
    submissions.forEach((sub) => {
      const div = document.createElement("div");
      div.style.border = "1px solid #ccc";
      div.style.padding = "10px";
      div.style.width = "200px";         // optional: fixed width for a grid look
      div.style.boxSizing = "border-box";
      // margin or gap can be controlled in the flex container or here
      div.innerHTML = `
        <p>Name: ${sub.typedName}</p>
        <img src="https://luge-worker.jojo-829.workers.dev/api/file?key=${sub.signatureKey}" 
             style="max-width: 100%;" />
      `;
      gallery.appendChild(div);
    });
  }

  // 5) disableForm() helper
  function disableForm() {
    // Disable name input, checkbox, button
    nameInput.disabled = true;
    consentBox.disabled = true;
    submitBtn.disabled = true;
  }
</script>

  <script>
    document.getElementById('contact-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const data = Object.fromEntries(formData.entries());

      try {
        const response = await fetch('/contact', { // Relative URL
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data),
        });

        if (response.ok) {
          alert('Message sent successfully!');
          e.target.reset();
        } else {
          const errorText = await response.text();
          alert('Failed to send message: ' + errorText);
        }
      } catch (error) {
        console.error('Error:', error);
        alert('An error occurred while sending your message.');
      }
    });
  </script>
  
<script src="./js/gsap.min.js"></script>

<!-- GSAP Plugins -->
<script src="./js/CSSRulePlugin.min.js"></script>
<script src="./js/CustomEase.min.js"></script>
<script src="./js/Draggable.min.js"></script>
<script src="./js/EaselPlugin.min.js"></script>
<script src="./js/EasePack.min.js"></script>
<script src="./js/Flip.min.js"></script>
<script src="./js/MotionPathPlugin.min.js"></script>
<script src="./js/Observer.min.js"></script>
<script src="./js/PixiPlugin.min.js"></script>
<script src="./js/ScrollToPlugin.min.js"></script>
<script src="./js/ScrollTrigger.min.js"></script>
<script src="./js/TextPlugin.min.js"></script>

<script>
    // Register all GSAP plugins
    gsap.registerPlugin(
        CSSRulePlugin,
        CustomEase,
        Draggable,
        EaselPlugin,
        EasePack,
        Flip,
        MotionPathPlugin,
        Observer,
        PixiPlugin,
        ScrollToPlugin,
        ScrollTrigger,
        TextPlugin
    );

    // GSAP Animations

    // Section fade-in animation
gsap.utils.toArray(".page").forEach((section) => {
    gsap.from(section, {
        opacity: 0,
        y: 50,
        duration: 1,
        scrollTrigger: {
            trigger: section,
            start: "top 80%",
            toggleActions: "play none none none"
        }
    });
});

    // Gallery item animation on insertion using MutationObserver
    const gallery = document.getElementById('gallery');
    const galleryObserver = new MutationObserver((mutationsList) => {
        mutationsList.forEach((mutation) => {
            if (mutation.type === "childList") {
                mutation.addedNodes.forEach((node) => {
                    if (node.nodeType === 1) { // Ensure it's an element node
                        gsap.fromTo(node, { opacity: 0, scale: 0.9 }, { opacity: 1, scale: 1, duration: 0.5 });
                    }
                });
            }
        });
    });

    // Start observing the gallery container
    galleryObserver.observe(gallery, {
        childList: true, // Observe direct children being added or removed
    });

    // Button click animation
    document.querySelectorAll('button').forEach(button => {
        button.addEventListener('click', () => {
            gsap.fromTo(button, { scale: 1 }, { scale: 1.2, duration: 0.2, yoyo: true, repeat: 1 });
        });
    });

    // Smooth scroll animation for links
    document.querySelectorAll('a[href^="#"]').forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const target = document.querySelector(link.getAttribute('href'));
            if (target) {
                gsap.to(window, { scrollTo: target, duration: 1, ease: "power2.out" });
            }
        });
    });

// Create a timeline that loops infinitely and plays forward then backward (yoyo)
const tl = gsap.timeline({ repeat: -1, yoyo: true });

// 1. Simple translation and rotation with a slow, smooth motion
tl.to('#top .imconn', {
  duration: 14,        // Slow movement over 14 seconds
  x: 80,               // Move 80px to the right
  y: 20,               // Move 20px down
  rotation: 10,        // Rotate 10 degrees clockwise
  ease: 'sine.inOut'   // Smooth easing in and out
})

// 2. Follow a curved path with auto-rotation (requires MotionPathPlugin)
// This gives a more fluid, organic path movement
.to('#top .imconn', {
  duration: 14,
  motionPath: {
    path: [
      { x: 80, y: 20 },
      { x: 120, y: -40 },
      { x: 200, y: 0 },
      { x: 150, y: 50 },
      { x: 80, y: 20 }
    ],
    autoRotate: true
  },
  ease: 'sine.inOut'
})

// 3. Perform a “wiggle” using keyframes (multiple rapid changes in position and rotation)
// This creates a playful, cartoon-like jitter effect.
.to('#top .imconn', {
  duration: 14,
  keyframes: [
    { x: 90, y: 25, rotation: 15, duration: 3 },
    { x: 70, y: 15, rotation: -15, duration: 4 },
    { x: 85, y: 20, rotation: 5, duration: 3 },
    { x: 80, y: 20, rotation: 0, duration: 4 }
  ],
  ease: 'sine.inOut'
})

// 4. A final movement returning the image closer to its starting state,
// but with a twist—a slow rotation change and a slight scale effect.
.to('#top .imconn', {
  duration: 14,
  x: 0,
  y: 0,
  rotation: -10,
  scale: 1.05,
  ease: 'sine.inOut'
});

// The timeline is set to loop infinitely with yoyo, so it will play forward through these steps and then reverse.


    // Log device pixel ratio for debugging
    console.log(window.devicePixelRatio);
</script>

 <script>

    // Select the h1 element
    const h1 = document.getElementById('mechanical-press');
    const text = h1.textContent;
    h1.textContent = ''; // Clear existing text

    // Loop over each character and wrap it in a span with a slight random rotation
    for (let i = 0; i < text.length; i++) {
      const span = document.createElement('span');
      span.className = 'letters';
      span.textContent = text[i];
      
      // If the character isn't a space, give it a random rotation between -3deg and 3deg
      if (text[i] !== ' ') {
        const angle = (Math.random() * 9 - 3).toFixed(1); // Random value between -3 and 3
        span.style.setProperty('--rotation', angle + 'deg');
      }
      
      h1.appendChild(span);
    }
  </script>
    <script>    
gsap.to(".letters", {
  duration: 8,
  backgroundPosition: "100% 50%",
  repeat: -1,
  yoyo: true,
  ease: "linear"
});

    gsap.to(".letters", {
      duration: 0.67,
      scale:1.11,
      rotation: -1.1,
      x: 1.17,
      repeat: -1,
      yoyo: true,
      ease: "expo.inOut",
      stagger: 0.49
    });
</script> 
    <script>// Make Enter key work for submission
document.addEventListener("keydown", (event) => {
    if (event.key === "Enter" && document.activeElement === submitBtn) {
        submitBtn.click();
    }
});

// Ensure all interactive elements have proper focus states
document.querySelectorAll("a, button, input, textarea").forEach((el) => {
    el.setAttribute("tabindex", "0");
});</script>
</body>
</html>
